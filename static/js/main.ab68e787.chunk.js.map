{"version":3,"sources":["js/messages.js","js/helpers.js","js/api.js","components/MeetBox.js","components/MeetList.js","panels/Home.js","panels/Favorite.js","components/ComList.js","panels/Meet.js","panels/MeetAdmin.js","components/MeetBoxAdmin.js","components/MeetListAdmin.js","panels/AdminPage.js","panels/AddMeetPage.js","panels/Offline.js","panels/Onboarding.js","panels/Onboarding2.js","panels/Onboarding3.js","panels/Rules.js","App.js","index.js"],"names":["messages","not_class_api","server_offline","no_internet","bad_phone","wtf","oops","home_panel_title","admin_panel_title","favorite_panel_title","meet_empty_list","comm_empty_list","add_meet_page","edit_meet_modal","add_meet_success","add_meet_error","forms","start","finish","photo","add","save","submit","isDev","window","location","hash","isLocal","port","getMessage","k","d","checkVersionAndroid","navigator","userAgent","indexOf","Array","prototype","includes","dd","showAlert","setState","title","message","actions","autoclose","style","loader","disable","popout","react_default","a","createElement","es6","actionsLayout","onClose","shortNumber","count","number","Math","floor","concat","replace","titles","declOfNum","_console","console","log","apply","arguments","axios","defaults","headers","common","Accept","API","Object","classCallCheck","this","method","action","data","url","catch","error","response","meet","send","id","meets","failed","reverse","meetId","allMeets","expireduserMeets","ownereduserMeets","userMeets","result","comments","MeetBox","goMeet","_this$props","_this","props","setParentState","connect","activePanel","openActionSheet","e","stopPropagation","_this$props2","api","fetchedUser","onClick","ismember","makeStory","_this$props3","state","getUserMeets","isFave","getOwneredMeets","getExpiredUserMeets","getMeets","userId","RemoveMeetMember","then","res","activeTab","removeMeetMember","theme","IS_PLATFORM_IOS","_this2","backgroundImage","meetMembers","members_amount","className","more_horizontal_default","name","disabled","approved","isexpired","level","target","href","messages_default","Component","MeetList","Fragment","length","map","index","components_MeetBox","assign","key","stretched","icon","recent_outline_default","Home","possibleConstructorReturn","getPrototypeOf","call","fetching","onRefresh","setTimeout","isFetching","components_MeetList","snackbar","Favorite","noShadow","marginBottom","vertical","type","selected","after","ComList","comment_text","loading","openErrorSnackbar","openDoneSnackbar","isUserAdmin","removeComment","RemoveComment","comment","status","success","GetMeetComments","display","ownerid","minWidth","size","src","owner_photo","flexDirection","marginLeft","wordBreak","width","owner_name","owner_surname","rate","float","act","RateComment","rateComment","isliked","before","like_default","like_outline_default","rating","commAction","more_vertical_default","borderRadius","textAlign","maxLength","placeholder","value","onChange","currentTarget","marginTop","AddComment","document","getElementById","Meet","flood","onStoryChange","activeStory","_this$state","start_date","split","join","link","sub","unsubscribe","detail","available","POSTGeoPosition","lat","long","GetGeoPosition","share","description","left","chevron_back_default","back_default","images","margin","photos","marginRight","AddMeetMember","subscribe","components_ComList","MeetAdmin","mes","fetch","group_id","payload","approve","Approve","DeApprove","deApprove","MeetBoxAdmin","components_MeetBoxAdmin","AdminPage","MeetListAdmin","AddMeetPage","AddMeet","asyncToGenerator","regenerator_default","mark","_callee","_ref2","wrap","_context","prev","next","start_time","finish_date","finish_time","owner_id","sent","noty","symbols_name","symbols_description","accept","stop","_e$currentTarget","app_id","scope","defineProperty","token","access_token","request_id","params","album_id","v","uploadPhoto","upload_url","sizes","_ref3","_callee2","requestUrl","file","body","_context2","files","abrupt","FormData","append","json","server","info","photos_list","_x","bind","assertThisInitialized","edit","objectSpread","formLang","photo_100","first_name","last_name","top","maxfiles","acceptfiletypes","minfilesize","checked","undefined","Date","parse","getDay","Offline","_React$Component","inherits","createClass","Panel_default","PanelHeader_default","Div_default","Footer_default","Spinner_default","React","Rules","App","initApp","schemeAttribute","createAttribute","attributes","setNamedItem","showOfflinePage","offline","showLoader","show","checkRoute","user","addUser","story","panel","getAllMeets","_ref","route","GetMeet","checkOnline","onLine","getStory","image","currentMeetId","background_type","locked","blob","attachment","text","_x2","duration","layout","backgroundColor","done_default","fill","height","clear_default","_callee3","_context3","GetMeets","_callee4","_context4","GetExpiredUserMeets","_callee5","_context5","GetOwneredMeets","_callee6","_context6","GetUserMeets","_callee7","_context7","GetAllMeets","getComments","_ref8","_callee8","_context8","GetComments","_x3","_ref9","_callee9","_context9","IsFirst","AddUser","UpdateUser","_x4","cache","status_bar_style","action_bar_color","setInterval","_this3","views","onSwipeBack","history","panels_Offline","tabbar","list_default","add_default","privacy_default","favorite_outline_default","src_panels_Home","panels_Rules","panels_Meet","panels_AddMeetPage","panels_AdminPage","panels_MeetAdmin","panels_Favorite","Onboarding","Onboarding2","Onboarding3","root","mVKMiniAppsScrollHelper","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.ab68e787.chunk.js","sourcesContent":["export const messages = {\r\n    not_class_api: \"Проблема с API\",\r\n    server_offline: \"Сервер не отвечает\",\r\n    no_internet: \"Ожидание интернет-соединения\",\r\n    bad_phone: \"Сервис поддерживает версию Android 5.1 и выше.\",\r\n    wtf: \"Что-то пошло не так.\",\r\n    oops: \"Упс...\",\r\n\r\n    home_panel_title: \"Диванные петиции\",\r\n    admin_panel_title: \"Модераторская\",\r\n    favorite_panel_title: \"Мои петиции\",\r\n    meet_empty_list: \"Здесь пока ничего нет\",\r\n    comm_empty_list: \"Комментариев нет\",\r\n\r\n    add_meet_page: \"Создание петиции\",\r\n    edit_meet_modal: \"Редактирование митинга\",\r\n    add_meet_success: \"Петиция отправлена на модерацию, это займёт пару часов\",\r\n    add_meet_error: \"Ошибка добавления петиции\",\r\n\r\n    forms: {\r\n        start: \"Дата начала\",\r\n        finish: \"Дата окончания\",\r\n        photo: \"Обложка петиции (до 1,13 МБ)\",\r\n        add: \"Добавить\",\r\n        save: \"Сохранить\",\r\n        submit: \"Отправить\"\r\n    }\r\n};\r\n","import { messages } from \"./messages\";\r\nimport React from 'react';\r\n\r\nimport { Alert } from '@vkontakte/vkui';\r\n// import connect from '@vkontakte/vk-connect';\r\n\r\nexport const isDev = (window.location.hash === '#debug') ? true : false;\r\nexport const isLocal = (window.location.port === '8080') ? true : false;\r\n\r\nexport const sleep = async (time) => {\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            resolve();\r\n        }, time);\r\n    });\r\n};\r\n\r\nexport const initLazyLoad = () => {\r\n    window.onscroll = () => {\r\n        const moreButton = document.getElementById('lazy-more');\r\n\r\n        if (moreButton && moreButton.disabled === false) {\r\n            if ((window.innerHeight + window.scrollY) >= (document.body.scrollHeight - 300)) {\r\n                moreButton.click();\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport const getMessage = (k, d) => {\r\n    if (messages && messages[k]) {\r\n        return messages[k];\r\n    } else {\r\n        return d || '—';\r\n    }\r\n}\r\n\r\nexport const checkVersionAndroid = () => {\r\n    if ((navigator.userAgent.indexOf('Android 4.') !== -1) || !Array.prototype.includes) {\r\n        // const actions = [{\r\n        //     title: 'Закрыть сервис',\r\n        //     action: () => { connect.send(\"VKWebAppClose\", { \"status\": \"success\" }) },\r\n        //     style: 'cancel'\r\n        // }];\r\n\r\n        window.showAlert(false, getMessage('bad_phone'));\r\n\r\n        return dd('checkVersionAndroid', 'Bad phone');\r\n    }\r\n    return dd('checkVersionAndroid', 'not bad phone');\r\n}\r\n\r\nexport const showAlert = (setState, title, message, actions) => {\r\n    actions = actions ? actions : [{\r\n        title: 'Ок',\r\n        autoclose: true,\r\n        style: 'cancel'\r\n    }];\r\n\r\n    setState({\r\n        loader: null,\r\n        disable: false,\r\n        popout: <Alert\r\n                    actionsLayout=\"vertical\"\r\n                    actions={actions}\r\n                    onClose={ () => {\r\n                        setState({ popout: null })\r\n                    }}\r\n                >\r\n                    { title ? <h2>{ title }</h2> : <h2>{ getMessage('oops') }</h2> }\r\n                    <p>{ message || getMessage('wtf') }</p>\r\n                </Alert>\r\n    });\r\n}\r\n\r\nexport const formatNumber = (number) => {\r\n     if (number === null) return 0;\r\n  return `${number}`.replace(/(\\d)(?=(\\d{3})+$)/g, '$1 ');\r\n};\r\nconst declOfNum = (number, titles) => {\r\nlet cases = [2, 0, 1, 1, 1, 2];\r\nreturn titles[ (number%100>4 && number%100<20)? 2 : cases[(number%10<5)?number%10:5] ];\r\n}\r\n\r\nexport const shortNumber = count => {\r\n  if(count > 1000){\r\n    return formatNumber(Math.floor(count/1000)) + 'K участников'\r\n  } else if(count > 0){\r\n    return `${count} ${declOfNum(count, [\"участник\", \"участника\", \"участников\"])}` ;\r\n  } else return 'Участников нет'\r\n}\r\n\r\nexport const dd = (...m) => {\r\n    if (isDev || isLocal) console.log(...m);\r\n}\r\n","import axios from 'axios';\r\nimport { dd } from './helpers';\r\n\r\n\r\nconst API_URL \t= 'https://vargasoff.ru:8000/';\r\n\r\naxios.defaults.headers.common = {\r\n    Accept: \"application/json, text/plain, */*\"\r\n}\r\n\r\nexport default class API {\r\n\r\n    constructor() {\r\n        dd('API: ', 'init');\r\n    }\r\n\r\n    async send(method = 'GET', action, data = {}) {\r\n        const response = await axios({\r\n            method,\r\n            url: `${API_URL}${action}`,\r\n            data\r\n        }).catch(error => {\r\n            console.error('Error API:', error);\r\n        //    window.showAlert(getMessage('server_offline'));\r\n          //  return { \"status\": false, \"failed\": error.response.data.message }\r\n        });\r\n        return response ? response.data : [];\r\n    }\r\n\r\n    async POSTGeoPosition(meet) {\r\n        let response = await this.send('POST', 'GeoPosition', meet);\r\n\r\n        dd('API: ', 'POSTGeoPosition', response);\r\n\r\n        return response;\r\n    }\r\n    async GetGeoPosition(location) {\r\n        let response = await this.send('GET',  `GeoPosition?meet=${location.meet}`, null);\r\n\r\n        dd('API: ', 'GetGeoPosition', response);\r\n\r\n        return response;\r\n    }\r\n    async AddMeet(meet) {\r\n        let response = await this.send('POST', 'AddMeet', meet);\r\n\r\n        dd('API: ', 'AddMeet', response);\r\n        /*\r\n        if(!response){\r\n          response = { failed: 'Нельзя создать больше трёх митингов в день' }\r\n        }*/\r\n\r\n        return response;\r\n    }\r\n    async IsFirst(id) {\r\n      console.log(id)\r\n        const response = await this.send('GET', `IsFirst?id=${id}`, null);\r\n\r\n        dd('API: ', 'IsFirst', id, response);\r\n\r\n        return response;\r\n    }\r\n    async getStory(meet) {\r\n        const response = await this.send('GET', `getStory?meet=${meet}`, null);\r\n\r\n        dd('API: ', 'getStory', response);\r\n\r\n        return response;\r\n    }\r\n   async AddUser() {\r\n        const response = await this.send('POST', 'AddUser', null);\r\n\r\n        dd('API: ', 'AddUser', response);\r\n\r\n        return response;\r\n    }\r\n    async UpdateUser() {\r\n        const response = await this.send('POST', 'UpdateUser', null);\r\n\r\n        dd('API: ', 'UpdateUser', response);\r\n\r\n        return response;\r\n    }\r\n\r\n    /**\r\n     * Получить список митиног\r\n     * @return array\r\n     */\r\n    async GetMeets() {\r\n        const meets = await this.send('GET', `GetMeets`, null);\r\n\r\n        dd('API: ', 'GetMeets', meets);\r\n\r\n        if(!meets.failed) {\r\n          return meets.reverse();\r\n        } else return [];\r\n    }\r\n    async GetMeet(meetId) {\r\n        const meet = await this.send('GET', `GetMeet?meet=${meetId}`, null);\r\n\r\n        dd('API: ', 'GetMeet', meet);\r\n\r\n          return meet;\r\n    }\r\n    async GetAllMeets() {\r\n        const allMeets = await this.send('GET', `admin/GetAllMeets`, null);\r\n        dd('API: ', 'GetAllMeets', allMeets);\r\n\r\n        if(!allMeets.failed) {\r\n          return allMeets.reverse();\r\n        } else return [];\r\n\r\n    }\r\n    async GetExpiredUserMeets() {\r\n        const expireduserMeets = await this.send('GET', `GetExpiredUserMeets`, null);\r\n        dd('API: ', 'GetExpiredUserMeets', expireduserMeets);\r\n\r\n        if(!expireduserMeets.failed) {\r\n          return expireduserMeets.reverse();\r\n        } else return [];\r\n\r\n    }\r\n    async GetOwneredMeets() {\r\n        const ownereduserMeets = await this.send('GET', `GetOwneredMeets`, null);\r\n        dd('API: ', 'GetOwneredMeets', ownereduserMeets);\r\n\r\n        if(!ownereduserMeets.failed) {\r\n          return ownereduserMeets.reverse();\r\n        } else return [];\r\n\r\n    }\r\n    async RateComment(data) {\r\n      const response = await this.send('POST', 'RateComment', data);\r\n\r\n      dd('API: ', 'RateComment', response);\r\n\r\n      return response;\r\n    }\r\n    async GetUserMeets() {\r\n        const userMeets = await this.send('GET', `GetUserMeets`, null);\r\n        dd('API: ', 'GetUserMeets', userMeets);\r\n\r\n        if(!userMeets.failed) {\r\n          return userMeets.reverse();\r\n        } else return [];\r\n\r\n    }\r\n\r\n    async AddMeetMember(data) {\r\n      const response = await this.send('POST', 'AddMeetMember', data);\r\n\r\n      dd('API: ', 'AddMeetMember', response);\r\n\r\n      return response;\r\n    }\r\n    async RemoveMeetMember(data) {\r\n      const response = await this.send('POST', `RemoveMeetMember`, data);\r\n\r\n      dd('API: ', 'RemoveMeetMember', response);\r\n\r\n      return response;\r\n    }\r\n\r\n    async AddComment(data) {\r\n      let result =  await this.send('POST', `AddComment`, data);\r\n\r\n        dd('API: ', 'AddComment', result);\r\n        return result;\r\n    }\r\n\r\n    async GetMeetComments(meet) {\r\n\r\n      let comments =  await this.send('GET', `GetMeetComments?meet=${meet}`, null);\r\n\r\n        dd('API: ', 'GetMeetComments', comments);\r\n        return comments;\r\n    }\r\n\r\n    async RemoveComment(data) {\r\n      let result =  await this.send('POST', `RemoveComment`, data);\r\n\r\n        dd('API: ', 'RemoveComment', result);\r\n        return result;\r\n    }\r\n\r\n    async Approve(data) {\r\n      const response = await this.send('POST', `admin/Approve`, data);\r\n\r\n      dd('API: ', 'Approve', response);\r\n\r\n      return response;\r\n    }\r\n    async DeApprove(data) {\r\n      const response = await this.send('POST', `admin/DeApprove`, data);\r\n\r\n      dd('API: ', 'DeApprove', response);\r\n\r\n      return response;\r\n    }\r\n\r\n\r\n}\r\n","import React, {Component} from 'react';\r\nimport { Button, IS_PLATFORM_IOS, Link, ActionSheetItem, ActionSheet, Div } from '@vkontakte/vkui/';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\n\r\nimport Icon28MoreHorizontal from '@vkontakte/icons/dist/28/more_horizontal';\r\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\r\nimport { shortNumber } from '../js/helpers';\r\n\r\nclass MeetBox extends Component {\r\n\r\n\r\n    goMeet = () => {\r\n        const { meet, setParentState } = this.props;\r\n        connect.send('VKWebAppEnableSwipeBack');\r\n\r\n        setParentState({\r\n            meet: meet,\r\n            activePanel: 'meet'\r\n        });\r\n    }\r\n    openActionSheet = (e) => {\r\n      e.stopPropagation();\r\n      const { meet, api, setParentState, fetchedUser } = this.props;\r\n\r\n      const removeMeetMember = e => {\r\n\r\n      const { state, getUserMeets, isFave, getOwneredMeets, getExpiredUserMeets, getMeets } = this.props\r\n\r\n      const userId = fetchedUser.id;\r\n      api.RemoveMeetMember({\r\n          id: fetchedUser.id,\r\n          meet: meet.id\r\n        }).then(res => {\r\n          if(isFave) {\r\n            let activeTab = state.activeTab\r\n            if(activeTab === 'all'){\r\n              getUserMeets(userId);\r\n            } else if(activeTab === 'my'){\r\n              getOwneredMeets(userId);\r\n            } else if(activeTab === 'exp'){\r\n              getExpiredUserMeets(userId);\r\n            }\r\n          } else {\r\n            getMeets(userId)\r\n          }\r\n        });\r\n      }\r\n\r\n      setParentState({\r\n          popout:\r\n          <ActionSheet onClose={() => setParentState({ popout: null })}>\r\n            <ActionSheetItem onClick={ this.goMeet } autoclose>\r\n              Перейти на страницу петиции\r\n            </ActionSheetItem>\r\n            {meet.ismember &&\r\n            <ActionSheetItem onClick={ () => this.props.makeStory(meet.id) } autoclose>\r\n              Поделиться в истории\r\n            </ActionSheetItem> }\r\n            {meet.ismember &&\r\n            <ActionSheetItem onClick={() => removeMeetMember()} autoclose theme=\"destructive\">\r\n              Отказаться от участия\r\n            </ActionSheetItem>}\r\n            {IS_PLATFORM_IOS && <ActionSheetItem autoclose theme=\"cancel\">Отменить</ActionSheetItem>}\r\n          </ActionSheet>,\r\n      });\r\n  }\r\n  componentDidMount(){}\r\n\r\n    render() {\r\n        const { meet } = this.props;\r\n        const backgroundImage = `url(${meet.photo})`;\r\n\r\n        var meetMembers = shortNumber(meet.members_amount)\r\n\r\n        return (\r\n            <Div className=\"MeetBox\" onClick={ this.goMeet } style={{ backgroundImage }} >\r\n                <Div className=\"MeetMore\">\r\n                    <Icon28MoreHorizontal  onClick={(e) => this.openActionSheet(e) }/>\r\n                </Div>\r\n                <Div className=\"MeetName\">{ meet.name }</Div>\r\n                <Div className=\"MeetAction\">\r\n                    {\r\n                      !meet.ismember ?\r\n                      <Button id='no_part' disabled={ !meet.approved || meet.isexpired } level=\"secondary\"> <span className=\"bold\">Участвовать</span> </Button>\r\n                      : <Button id='part' disabled={ !meet.approved || meet.isexpired } level=\"commerce\"><span className=\"bold_White\">Участвую!</span> </Button>\r\n                    }\r\n                    <Div className=\"MeetMembers\">{ meetMembers }</Div>\r\n                    {\r\n                      meet.ismember === 11 &&\r\n                        <Link id='link' onClick={e => e.stopPropagation()} target=\"_blank\" href=\"https://vk.me/join/AJQ1d2apLRT8GMtyuXFrAkqD\"><Icon28Messages/></Link>\r\n                    }\r\n                </Div>\r\n            </Div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MeetBox;\r\n","import React, {Component} from 'react';\r\nimport { Group, Placeholder } from '@vkontakte/vkui';\r\n\r\nimport MeetBox from './MeetBox';\r\n\r\nimport Icon56RecentOutline from '@vkontakte/icons/dist/56/recent_outline';\r\n\r\nclass MeetList extends Component {\r\n\r\n    render() {\r\n        const { meets, setParentState, getUserMeets, makeStory } = this.props;\r\n\r\n        if(meets === false){\r\n          return null\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {\r\n                    (meets && meets.length) ?\r\n                        <Group className=\"transparentBody MeetList\">\r\n                            {\r\n                                meets.map((meet, index) =>\r\n                                (\r\n                                  <MeetBox\r\n                                      key={index}\r\n                                      meet={meet}\r\n                                      {...this.props}\r\n                                      makeStory={makeStory}\r\n                                      getUserMeets={getUserMeets}\r\n                                      setParentState={setParentState}\r\n                                  />\r\n                                ))\r\n                            }\r\n                      </Group>\r\n                        :\r\n\r\n                        <Placeholder\r\n                          stretched\r\n                          icon={<Icon56RecentOutline />}\r\n                          >\r\n                        Скоро здесь обязательно что-то появится..\r\n                          </Placeholder>\r\n\r\n                }\r\n                </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MeetList;\r\n","import React, { Component } from 'react';\r\nimport { Panel, PanelHeader, PullToRefresh } from '@vkontakte/vkui';\r\nimport { getMessage } from '../js/helpers';\r\nimport MeetList from '../components/MeetList';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            meets: this.props.meets,\r\n            fetching: false\r\n        };\r\n\r\n        this.onRefresh = () => {\r\n      this.setState({ fetching: true });\r\n      setTimeout(() => {\r\n        this.props.getMeets();\r\n        this.setState({ fetching: false });\r\n      }, 500);  // сука ненавижу этот PTR, почему он не может нормально работать блять\r\n    }\r\n        this.api = this.props.api;\r\n    }\r\n\r\n    render() {\r\n        const { id, setParentState } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader>{ getMessage('home_panel_title') }</PanelHeader>\r\n\r\n                <PullToRefresh onRefresh={this.onRefresh} isFetching={this.state.fetching}>\r\n                        <MeetList\r\n                            {...this.props}\r\n                            meets={ this.props.meets }\r\n                            setParentState={ setParentState }\r\n                        />\r\n                </PullToRefresh>\r\n                {this.props.state.snackbar}\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Panel, PanelHeader, FixedLayout, Div, Tabs, TabsItem, Counter, HorizontalScroll } from '@vkontakte/vkui';\r\nimport { getMessage } from '../js/helpers';\r\nimport MeetList from '../components/MeetList';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass Favorite extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            meets: this.props.userMeets\r\n        };\r\n\r\n        this.api = this.props.api;\r\n    }\r\n\r\n\r\n    render() {\r\n        const { id, setParentState, getUserMeets, getExpiredUserMeets, getOwneredMeets, makeStory, userMeets, state } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader noShadow>{ getMessage('favorite_panel_title') }</PanelHeader>\r\n                    <Div style={{ marginBottom: 30 }}/>\r\n                        <FixedLayout vertical=\"top\">\r\n                             <Tabs theme=\"header\" type=\"buttons\">\r\n                               <HorizontalScroll>\r\n                                 <TabsItem\r\n                                   onClick={() => setParentState({ activeTab: 'all' }) & getUserMeets()}\r\n                                   selected={state.activeTab === 'all'}\r\n                                   after={state.activeTab === 'all' && <Counter>{userMeets.length}</Counter>}\r\n\r\n                                 >\r\n                                   Все\r\n                                 </TabsItem>\r\n                                 <TabsItem\r\n                                   onClick={() => setParentState({ activeTab: 'exp' }) & getExpiredUserMeets()}\r\n                                   selected={state.activeTab === 'exp'}\r\n                                   after={state.activeTab === 'exp' && <Counter>{userMeets.length}</Counter>}\r\n                                 >\r\n                                   Завершенные\r\n                                 </TabsItem>\r\n                                 <TabsItem\r\n                                   onClick={() => setParentState({ activeTab: 'my' }) & getOwneredMeets()}\r\n                                   selected={state.activeTab === 'my'}\r\n                                    after={state.activeTab === 'my' && <Counter>{userMeets.length}</Counter>}\r\n                                 >\r\n                                   Созданные\r\n                                 </TabsItem>\r\n                               </HorizontalScroll>\r\n                             </Tabs>\r\n                        </FixedLayout>\r\n                        <MeetList\r\n                            {...this.props}\r\n                            isFave\r\n                            makeStory={ makeStory }\r\n                            getUserMeets={ getUserMeets }\r\n                            meets={ this.props.userMeets }\r\n                            setParentState={ setParentState }\r\n                        />\r\n                  {this.props.state.snackbar}\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Favorite;\r\n","import React, {Component} from 'react';\r\nimport { Group, Div, IS_PLATFORM_IOS, ActionSheetItem, ActionSheet, Avatar, Textarea, Link, Button, Spinner } from '@vkontakte/vkui';\r\n\r\nimport { getMessage } from '../js/helpers';\r\n\r\nimport Icon16MoreVertical from '@vkontakte/icons/dist/16/more_vertical';\r\nimport Icon16Like from '@vkontakte/icons/dist/16/like';\r\nimport Icon16LikeOutline from '@vkontakte/icons/dist/16/like_outline';\r\n\r\nimport '../css/App.css';\r\n\r\nclass ComList extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n          meet: this.props.state.meet,\r\n          comment_text: '',\r\n          snackbar: null,\r\n          loading: false\r\n      };\r\n\r\n      this.api = this.props.api;\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n    render() {\r\n        const { comments, setParentState, openErrorSnackbar, openDoneSnackbar, fetchedUser, isUserAdmin } = this.props;\r\n        const { meet } = this.state;\r\n        if(comments === false){\r\n          return <Div><Spinner/></Div>\r\n        }\r\n\r\n        const addComment = e => {\r\n          this.setState({ loading: true });\r\n          this.api.AddComment({\r\n            comment: e,\r\n            meet: meet.id\r\n          }).then( e => {\r\n           if(e.success){\r\n             this.api.GetMeetComments(this.props.state.meet.id).then(comments => setParentState({ comments }))\r\n             document.getElementById('comm_inp').value = ''\r\n             this.setState({ comment_text: '' })\r\n           } else if(e.failed){\r\n              openErrorSnackbar(e.failed)\r\n           } else {\r\n             openErrorSnackbar('Нельзя отправлять комментарии так часто.')\r\n           }\r\n             this.setState({ loading: false });\r\n          })\r\n        }\r\n        const commAction = e => {\r\n          setParentState({\r\n              popout:\r\n              <ActionSheet onClose={() => setParentState({ popout: null })}>\r\n                <ActionSheetItem onClick={() => removeComment(e)} autoclose theme=\"destructive\">\r\n                  Удалить комментарий\r\n                </ActionSheetItem>\r\n                {IS_PLATFORM_IOS && <ActionSheetItem autoclose theme=\"cancel\">Отменить</ActionSheetItem>}\r\n              </ActionSheet>,\r\n          });\r\n        }\r\n\r\n        const rateComment = (id, type) => {\r\n          let act;\r\n          if(type){\r\n            act = 0;\r\n          } else act = 1;\r\n          this.api.RateComment({\r\n            comment: id,\r\n            act: act\r\n            }).then( e => {\r\n           if(e) {\r\n             if(e.length === 0) {\r\n               openErrorSnackbar('Не так часто')\r\n               return\r\n             } else if(e.status || e.success){\r\n               this.api.GetMeetComments(this.props.state.meet.id).then(comments => {\r\n                 setParentState({ comments });\r\n               });\r\n             } else if(e.message){\r\n               openErrorSnackbar(e.message);\r\n             } else if(e.failed){\r\n               openErrorSnackbar(e.failed);\r\n             }\r\n           }\r\n\r\n         });\r\n        }\r\n\r\n        const removeComment = e => {\r\n          setParentState({ comments: false })\r\n          this.api.RemoveComment({ comment: e }).then( e => {\r\n            if(e.length === 0) {\r\n              openErrorSnackbar('Не так часто')\r\n              return\r\n            }\r\n           if(e.status || e.success){\r\n              this.api.GetMeetComments(this.props.state.meet.id).then(comments => setParentState({ comments }));\r\n               openDoneSnackbar('Комментарий удалён.');\r\n           } else if(e.message){\r\n             openErrorSnackbar(e.message);\r\n           } else if(e.failed){\r\n             openErrorSnackbar(e.failed);\r\n           }\r\n         });\r\n        }\r\n        return (\r\n            <>\r\n                        {this.state.snackbar}\r\n                {\r\n                    (comments && comments.length) ?\r\n                        <>\r\n                            {\r\n                                comments.map((comment, index) =>\r\n\r\n                                <Group className='commentItem'  key={index}>\r\n                                <Div style={{ display: 'flex'}}>\r\n                                   <Link href={\"https://vk.com/id\" + comment.ownerid} target=\"_blank\">\r\n                                  <Avatar style={{ minWidth: 36 }} size={36} src={comment.owner_photo}/>\r\n                                    </Link>\r\n                                 <div style={{ display: 'flex', flexDirection: 'column', marginLeft: 10, wordBreak: 'break-all', width: '100%'}}>\r\n                                   <Link href={\"https://vk.com/id\" + comment.ownerid} target=\"_blank\">\r\n                                   <Div id='comm'>{`${comment.owner_name}  ${comment.owner_surname}`}</Div>\r\n                                   </Link>\r\n                                  {comment.comment}\r\n                                                                   {comment.rate}\r\n                                   </div>\r\n\r\n                                      <Button\r\n                                        id='like'\r\n                                        style={{ float: 'right' }}\r\n                                        level=\"tertiary\"\r\n                                        onClick={ (e) => {\r\n                                          e.stopPropagation()\r\n                                         rateComment(comment.id, comment.isliked)\r\n                                        } }\r\n                                        before={comment.isliked ? <Icon16Like id='like'/> :  <Icon16LikeOutline id='like'/> }>\r\n                                      {comment.rating !== 0 && comment.rating}\r\n                                    </Button>\r\n                                   {((comment.ownerid === fetchedUser.id) || isUserAdmin) &&\r\n                                      <Button\r\n                                         level=\"tertiary\"\r\n                                         style={{ float: 'right' }}\r\n                                         onClick={ (e) => {\r\n                                           e.stopPropagation()\r\n                                          commAction(comment.id)\r\n                                         } }\r\n                                         ><Icon16MoreVertical/>\r\n                                    </Button>}\r\n                                </Div>\r\n                                </Group>\r\n                              )\r\n                            }\r\n                        </>\r\n                        :\r\n                        <Group style={{ borderRadius: '15px' }}>\r\n                            <Div style={{ textAlign: 'center' }}>{ getMessage('comm_empty_list') }</Div>\r\n                        </Group>\r\n                }\r\n                <Group>\r\n                <Div>\r\n                <Textarea\r\n                  maxLength='45'\r\n                  style={{ borderRadius: '15px' }}\r\n                  placeholder={'Напишите комментарий'}\r\n                  id='comm_inp'\r\n                  value={this.state.comment_text}\r\n                  onChange={ e =>  this.setState({ comment_text: e.currentTarget.value }) }\r\n                 />\r\n                <Button\r\n                  disabled={!this.state.comment_text || this.state.loading}\r\n                  size='xl'\r\n                  style={{ marginTop: 15,  borderRadius: '60px' }}\r\n                  onClick={ () => {\r\n                  if(this.state.comment_text){\r\n                    addComment(this.state.comment_text);\r\n                  }\r\n                }}>Отправить комментарий</Button>\r\n                </Div>\r\n                </Group>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ComList;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, ActionSheetItem, ActionSheet,\r\n  Div, Link, Spinner, UsersStack, IS_PLATFORM_IOS, Group, HeaderButton, Separator, Button } from '@vkontakte/vkui';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nimport ComList from '../components/ComList';\r\n\r\nimport { shortNumber } from '../js/helpers';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass Meet extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            meet: this.props.state.meet,\r\n            disabled: false,\r\n            snackbar: null,\r\n            flood: false\r\n        };\r\n\r\n        this.api = this.props.api;\r\n    }\r\n\r\n    componentDidMount() {\r\n      const { setParentState } = this.props;\r\n      this.api.GetMeetComments(this.props.state.meet.id).then(comments => setParentState({ comments }))\r\n    }\r\n\r\n    render() {\r\n        const { id, onStoryChange, openDoneSnackbar, setParentState, activeStory} = this.props;\r\n        const { meet, disabled } = this.state;\r\n        var meetMembers = shortNumber(meet.members_amount)\r\n        const start_date = meet.start.split('-').reverse().join('-')\r\n        const backgroundImage = `url(${meet.photo})`;\r\n        var link = 'https://vk.com/id' + meet.ownerid\r\n\r\n        const sub = e => {\r\n          connect.unsubscribe(sub)\r\n          switch (e.detail.type) {\r\n            case 'VKWebAppGeodataResult':\r\n          if(!this.state.flood){\r\n            if(!e.detail.data.available) {\r\n              console.log(e.detail.data.available)\r\n              this.props.openErrorSnackbar('Доступ к геолокации не был получен.');\r\n              this.setState({ disabled: false });\r\n              return\r\n            }\r\n                this.api.POSTGeoPosition({\r\n                  lat: e.detail.data.lat,\r\n                  long: e.detail.data.long\r\n                }).then(res => {\r\n                  this.api.GetGeoPosition({\r\n                    meet: this.props.state.meet.id\r\n                  }).then(res => {\r\n                    this.setState({ flood: true })\r\n                    setTimeout(() => this.setState({ flood: false }), 2000)\r\n                    if(res.failed){\r\n                      this.setState({ disabled: false });\r\n                      this.props.openErrorSnackbar(res.failed);\r\n                    } else if(res.status) {\r\n                      openDoneSnackbar(res.status);\r\n                      this.setState({ disabled: false });\r\n                    }\r\n                  })\r\n\r\n                })\r\n          } else {\r\n            this.setState({ disabled: false });\r\n            this.props.openErrorSnackbar('Не так часто');\r\n          }\r\n              break;\r\n              case 'VKWebAppGeodataFailed':\r\n                    this.props.openErrorSnackbar('Доступ к геолокации запрещён.');\r\n                   this.setState({ disabled: false });\r\n                break;\r\n            default:\r\n              // code\r\n          }\r\n        }\r\n\r\n        const paticipate = e => {\r\n          this.setState({ disabled: true })\r\n          this.api.AddMeetMember({\r\n            meet: meet.id\r\n          }).then( e => onStoryChange(activeStory, 'meets') )\r\n        }\r\n        const removeMeetMember = e => {\r\n        this.setState({ disabled: true })\r\n        this.api.RemoveMeetMember({\r\n            meet: meet.id\r\n          }).then( e => onStoryChange(activeStory, 'meets') )\r\n        }\r\n        const menu = e => {\r\n          setParentState({\r\n              popout:\r\n              <ActionSheet onClose={() => setParentState({ popout: null })}>\r\n                <ActionSheetItem onClick={ share } autoclose>\r\n                  Поделиться на стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem onClick={ () => this.props.makeStory(meet.id) } autoclose>\r\n                  Поделиться в истории\r\n                </ActionSheetItem>\r\n                {IS_PLATFORM_IOS && <ActionSheetItem autoclose theme=\"cancel\">Отменить</ActionSheetItem>}\r\n              </ActionSheet>,\r\n          });\r\n          }\r\n        const share = e => {\r\n          connect.send(\"VKWebAppShowWallPostBox\", {\"message\": `${meet.name}\\n\\n${meet.description}\\n\\n Примите участие в петиции по ссылке: https://vk.com/app7217332#${meet.id}`});\r\n        }\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader left={\r\n                  <HeaderButton onClick={() => onStoryChange(activeStory, 'meets')}>\r\n\t\t\t               {IS_PLATFORM_IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t               </HeaderButton>}>Петиция</PanelHeader>\r\n\r\n                   <Div onClick={() => connect.send(\"VKWebAppShowImages\", { images: [ meet.photo ] })} className=\"MeetImg\" style={{ backgroundImage }} >\r\n                       <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ meet.name }</Div>\r\n                       <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ start_date }</Div>\r\n                   </Div>\r\n                <Group>\r\n                  { meet.owner_name && <>\r\n                    <Separator style={{ margin: '12px 0' }} />\r\n                      <Link id='link' target=\"_blank\" href={link}>\r\n                        <UsersStack  photos={[ meet.owner_photo ]}>{meet.owner_name} {meet.owner_surname} • {meetMembers}</UsersStack>\r\n                      </Link>\r\n                      </>\r\n                  }\r\n                    <Separator style={{ margin: '12px 0' }} />\r\n                    <Div id='desk'>{meet.description}</Div>\r\n\r\n                  {\r\n                    ( !meet.isexpired && meet.approved ) &&\r\n                    <>\r\n                    <Div style={{ display: 'flex' }}>\r\n                        {\r\n                          !meet.ismember ?\r\n                          <Button size=\"l\" disabled={disabled} stretched style={{ marginRight: 8 }}\r\n                          onClick={ () => paticipate() }>{disabled ? <Spinner size='small'/> : 'Участвовать'}</Button>\r\n                          : <Button size=\"l\" disabled={disabled} stretched style={{ marginRight: 8 }}\r\n                          onClick={ () => removeMeetMember() }>{disabled ? <Spinner size='small'/> : 'Отказаться от участия'} </Button>\r\n                        }\r\n                        <Button size=\"l\" stretched level='secondary' style={{ marginRight: 8 }}\r\n                        onClick={ menu }>Поделиться</Button>\r\n                    </Div>\r\n                    {\r\n                      meet.ismember  &&\r\n                    <Div>\r\n                    <Button\r\n                      level='secondary'\r\n                      size=\"l\"\r\n                      disabled={disabled}\r\n                      stretched\r\n                      style={{ marginRight: 8 }}\r\n                      onClick={ () => {\r\n                              connect.subscribe(sub);\r\n                              connect.send(\"VKWebAppGetGeodata\", {});\r\n                              this.setState({ disabled: true })}\r\n                            }>\r\n                    {disabled ? <Spinner size='small'/> : 'Найти единомышленников рядом'}\r\n                    </Button>\r\n                    </Div>\r\n                  }\r\n                  <Separator style={{ margin: '12px 0' }} />\r\n                  <Div id='desk'>Комментарии:</Div>\r\n                    </>\r\n                  }\r\n                </Group>\r\n              { !meet.isexpired && meet.approved &&  <ComList {...this.props}/>}\r\n                  {this.props.state.snackbar}\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Meet;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, Div, UsersStack, Spinner, IS_PLATFORM_IOS, Group, Link, HeaderButton, Separator, Button } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport { shortNumber } from '../js/helpers';\r\n// import Icon24Users from '@vkontakte/icons/dist/24/users';\r\n// import Icon24ShareOutline from '@vkontakte/icons/dist/24/share_outline';\r\n// import Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\r\n// import Icon24Done from '@vkontakte/icons/dist/24/done';\r\n// import Icon24Story from '@vkontakte/icons/dist/24/story';\r\n\r\n// import Icon20PlaceOutline from '@vkontakte/icons/dist/20/place_outline';\r\n// import Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport connect from '@vkontakte/vk-connect';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass MeetAdmin extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            meet: this.props.state.meet,\r\n            disabled: false\r\n        };\r\n\r\n        this.api = this.props.api;\r\n    }\r\n\r\n    componentDidMount() {}\r\n\r\n    render() {\r\n        const { id, onStoryChange, fetchedUser } = this.props;\r\n        const { meet } = this.state;\r\n        const backgroundImage = `url(${meet.photo})`;\r\n        const start_date = meet.start.split('-').reverse().join('-')\r\n        var meetMembers = shortNumber(meet.members_amount)\r\n        var link = 'https://vk.com/id' + meet.ownerid\r\n\r\n        const approve = e => {\r\n          const mes = `Ваша петиция <<${meet.name}>> прошла модерацию.&${meet.ownerid}`;\r\n          fetch('https://cors-anywhere.herokuapp.com/https://groovy-apricot.glitch.me/', { method: 'GET' })\r\n          .then(res => console.log(200) & connect.send(\"VKWebAppSendPayload\", {\"group_id\": 189366357, \"payload\": {\"approve\": mes}}));\r\n          this.setState({ disabled: true })\r\n          this.api.Approve({\r\n            id: fetchedUser.id,\r\n            meet: meet.id\r\n          }).then( e => onStoryChange('admin', 'meets') )\r\n        }\r\n        const deApprove = e => {\r\n          const mes = `Ваша петиция <<${meet.name}>> отклонена модератором.&${meet.ownerid}`;\r\n          fetch('https://cors-anywhere.herokuapp.com/https://groovy-apricot.glitch.me/', { method: 'GET' })\r\n          .then(res => connect.send(\"VKWebAppSendPayload\", {\"group_id\": 189366357, \"payload\": {\"approve\": mes}}));\r\n          this.setState({ disabled: true })\r\n          this.api.DeApprove({\r\n            id: fetchedUser.id,\r\n            meet: meet.id\r\n          }).then( e => onStoryChange('admin', 'meets') )\r\n        }\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader left={\r\n                  <HeaderButton onClick={() => onStoryChange('admin', 'meets')}>\r\n\t\t\t               {IS_PLATFORM_IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t               </HeaderButton>}>Петиция</PanelHeader>\r\n                   <Group>\r\n                   <Div className=\"MeetImg\" style={{ backgroundImage }} >\r\n                       <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ meet.name }</Div>\r\n                       <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ start_date }</Div>\r\n                   </Div>\r\n                   <Separator style={{ margin: '12px 0' }} />\r\n                     <Link id='link' target=\"_blank\" href={link}>\r\n                       <UsersStack  photos={[ meet.owner_photo ]}>{meet.owner_name} {meet.owner_surname} • {meetMembers}</UsersStack>\r\n                     </Link>\r\n                   <Separator style={{ margin: '12px 0' }} />\r\n                    <Div id='desk'>{meet.description}</Div>\r\n                    <Div style={{display: 'flex'}}>\r\n                            {\r\n                              meet.approved === 0 ?\r\n                              <Button size=\"l\" disabled={this.state.disabled} stretched style={{ marginRight: 8 }}\r\n                              onClick={ () => approve() }>{this.state.disabled ? <Spinner/> : 'Принять'}</Button>\r\n                              : <Button size=\"l\" disabled={this.state.disabled} stretched style={{ marginRight: 8 }}\r\n                              onClick={ () => deApprove() }>{this.state.disabled ? <Spinner/> : 'ОТКЛОНИТЬ НАХУЙ'} </Button>\r\n                            }\r\n                    </Div>\r\n                </Group>\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MeetAdmin;\r\n","import React, {Component} from 'react';\r\nimport { Button, IS_PLATFORM_IOS, Link, ActionSheetItem, ActionSheet, Div } from '@vkontakte/vkui/';\r\n\r\nimport Icon28MoreHorizontal from '@vkontakte/icons/dist/28/more_horizontal';\r\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\r\nimport { shortNumber } from '../js/helpers';\r\n\r\nclass MeetBoxAdmin extends Component {\r\n\r\n\r\n    goMeet = () => {\r\n        const { meet, setParentState } = this.props;\r\n\r\n        setParentState({\r\n            meet: meet,\r\n            activePanel: 'meetAdmin'\r\n        });\r\n    }\r\n\r\n    openActionSheet = (e) => {\r\n      e.stopPropagation()\r\n      const { setParentState/*, api, fetchedUser, meet */} = this.props;\r\n\r\n    /*  const removeMeetMember = e => {\r\n      api.RemoveMeetMember({\r\n          id: fetchedUser.id,\r\n          meet: meet.id\r\n        })\r\n      }\r\n*/\r\n      setParentState({\r\n          popout:\r\n          <ActionSheet onClose={() => setParentState({ popout: null })}>\r\n            <ActionSheetItem onClick={ this.goMeet } autoclose>\r\n              Перейти на страницу петиции\r\n            </ActionSheetItem>\r\n            <ActionSheetItem autoclose>\r\n              Поделиться в истории\r\n            </ActionSheetItem>\r\n            {IS_PLATFORM_IOS && <ActionSheetItem autoclose theme=\"cancel\">Отменить</ActionSheetItem>}\r\n          </ActionSheet>,\r\n      });\r\n  }\r\n\r\n    render() {\r\n        const { meet } = this.props;\r\n        const backgroundImage = `url(${meet.photo})`;\r\n        var meetMembers = shortNumber(meet.members_amount)\r\n\r\n        return (\r\n            <Div className=\"MeetBox\" onClick={ this.goMeet } style={{ backgroundImage }} >\r\n                <Div className=\"MeetMore\">\r\n                    <Icon28MoreHorizontal  onClick={(e) => this.openActionSheet(e) }/>\r\n                </Div>\r\n                <Div className=\"MeetName\">{ meet.name }</Div>\r\n                <Div className=\"MeetAction\">\r\n                  {\r\n                    meet.approved ?\r\n                    <Button level=\"primary\">Одобрен</Button>\r\n                    :   <Button level=\"primary\">Не рассмотрен</Button>\r\n                  }\r\n                    <Div className=\"MeetMembers\">{ meetMembers }</Div>\r\n                {/*    <Link id='link' onClick={e => e.stopPropagation()} target=\"_blank\" href=\"https://vk.me/join/AJQ1d2apLRT8GMtyuXFrAkqD\"><Icon28Messages/></Link>*/}\r\n                </Div>\r\n            </Div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MeetBoxAdmin;\r\n","import React, {Component} from 'react';\r\nimport { Group, Div } from '@vkontakte/vkui';\r\n\r\nimport MeetBoxAdmin from './MeetBoxAdmin';\r\nimport { getMessage } from '../js/helpers';\r\n\r\nclass MeetList extends Component {\r\n\r\n    render() {\r\n        const { meets, setParentState } = this.props;\r\n\r\n        if(meets === false){\r\n          return null\r\n        }\r\n\r\n        return (\r\n            <Group className=\"transparentBody MeetList\">\r\n                {\r\n                    (meets && meets.length) ?\r\n                        <>\r\n                            {\r\n                                meets.map((meet, index) => <MeetBoxAdmin\r\n                                    key={index}\r\n                                    meet={meet}\r\n                                    {...this.props}\r\n                                    setParentState={setParentState}\r\n                                />)\r\n                            }\r\n                        </>\r\n                        :\r\n                        <Group>\r\n                            <Div>{ getMessage('meet_empty_list') }</Div>\r\n                        </Group>\r\n                }\r\n            </Group>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MeetList;\r\n","import React, {Component} from 'react';\r\nimport { Panel,PanelHeader } from '@vkontakte/vkui';\r\nimport { getMessage } from '../js/helpers';\r\nimport MeetListAdmin from '../components/MeetListAdmin';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass AdminPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            meets: this.props.allMeets\r\n        };\r\n\r\n        this.api = this.props.api;\r\n    }\r\n\r\n\r\n    render() {\r\n        const { id, setParentState } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader>{ getMessage('admin_panel_title') }</PanelHeader>\r\n\r\n                        <MeetListAdmin\r\n                            {...this.props}\r\n                            meets={ this.props.allMeets }\r\n                            setParentState={ setParentState }\r\n                        />\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminPage;\r\n","import React, { Component } from 'react';\r\nimport { Panel, PanelHeader, FormLayout, UsersStack, Textarea, Input, Link,\r\n  Spinner, Div, Group, Separator, File, Checkbox, Button } from '@vkontakte/vkui';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\n\r\n//import Cropper from 'react-cropper';\r\n//import 'cropperjs/dist/cropper.css';\r\n\r\n// import Icon24Users from '@vkontakte/icons/dist/24/users';\r\n// import Icon24ShareOutline from '@vkontakte/icons/dist/24/share_outline';\r\n// import Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\r\n// import Icon24Done from '@vkontakte/icons/dist/24/done';\r\n// import Icon24Story from '@vkontakte/icons/dist/24/story';\r\n\r\n// import Icon20PlaceOutline from '@vkontakte/icons/dist/20/place_outline';\r\n// import Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\nimport { getMessage, dd } from '../js/helpers';\r\n\r\nclass AddMeetPage extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n          disabled: false,\r\n          token: false,\r\n          error: false,\r\n          message: false\r\n      }\r\n\r\n      this.onChange = this.onChange.bind(this);\r\n      this.AddMeet = this.AddMeet.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n      const { edit } = this.props;\r\n\r\n      if (edit) {\r\n          this.setState({ ...edit });\r\n      }\r\n  }\r\n\r\n\r\n  AddMeet = async () => {\r\n      const { api, setParentState, openDoneSnackbar, openErrorSnackbar, fetchedUser, state } = this.props;\r\n\r\n      setParentState({ disabled: true });\r\n      const start = `${state.start_date} ${state.start_time}`;\r\n      const finish = `${state.finish_date} ${state.finish_time}`;\r\n      const { success, failed } = await api.AddMeet({\r\n          owner_id: fetchedUser.id,\r\n          name: state.name,\r\n          start: start,\r\n          finish: finish,\r\n          description: state.description,\r\n          photo: state.photo\r\n      });\r\n\r\n      if (success) {\r\n          const mes = `Ваша петиция <<${state.name}>> отправлена на модерацию.`;\r\n        if(state.noty){\r\n          fetch('https://cors-anywhere.herokuapp.com/https://groovy-apricot.glitch.me/', { method: 'GET' })\r\n          .then(res => connect.send(\"VKWebAppSendPayload\", {\"group_id\": 189366357, \"payload\": {\"mes\": mes}}));\r\n        }\r\n\r\n          setParentState({\r\n                      activePanel: 'meets',\r\n                      activeStory: 'home',\r\n                      symbols_name: '',\r\n                \t\t\tsymbols_description: '',\r\n                \t\t\tname: '',\r\n                      description: '',\r\n                \t\t\tstart_date: false,\r\n                \t\t\tfinish_date: false,\r\n                \t\t\tphoto: false,\r\n                  \t  accept: false\r\n                    });\r\n                  openDoneSnackbar(success);\r\n      } else if(failed){\r\n            openErrorSnackbar(failed)\r\n      } else {\r\n            openErrorSnackbar('Создавать петиции можно не чаще четырёх раз в день')\r\n      }\r\n      setTimeout(() => setParentState({\r\n        popout: null\r\n      }), 3000)  // понял, что всё таки нужно\r\n  }\r\n  onChange = (e) => {\r\n    connect.unsubscribe(this.sub);\r\n    connect.subscribe(this.sub);\r\n    const { name, value } = e.currentTarget;\r\n    if(name === 'file'){\r\n      connect.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7217332, \"scope\": \"photos\"})\r\n    } else {\r\n      this.props.setParentState({ [name]: value });\r\n      if(name === 'name') this.props.setParentState({ symbols_name: `${value.length}/60` })\r\n      if(name === 'description') this.props.setParentState({ symbols_description: `${value.length}/254` })\r\n    }\r\n  }\r\n\r\n\r\n  sub = (e) => {\r\n    switch (e.detail.type) {\r\n      case 'VKWebAppAccessTokenReceived':\r\n      console.log(e.detail.type , e.detail.data)\r\n      if(e.detail.data.scope === 'photos'){\r\n        this.setState({ token: e.detail.data.access_token })\r\n        connect.send(\"VKWebAppCallAPIMethod\", {\"method\": \"photos.getUploadServer\", \"request_id\": \"photo_req\", \"params\":\r\n         {\"album_id\": \"267690301\",  \"group_id\": \"189366357\", \"v\":\"5.103\", \"access_token\": e.detail.data.access_token }});\r\n      }\r\n        break;\r\n      case 'VKWebAppCallAPIMethodResult':\r\n         if(e.detail.data.request_id === 'photo_req'){\r\n           this.uploadPhoto(e.detail.data.response.upload_url);\r\n         }\r\n         if(e.detail.data.request_id === 'photo_save_req'){\r\n           connect.unsubscribe(this.sub);\r\n           this.setState({\r\n             error: false,\r\n             message: 'Обложка загружена.',\r\n             disabled: false\r\n           })\r\n\r\n           this.props.setParentState({ photo: e.detail.data.response[0].sizes[e.detail.data.response[0].sizes.length - 1].url });\r\n           dd('photo', e.detail.data.response[0].sizes.length - 1 , e.detail.data.response[0].sizes[e.detail.data.response[0].sizes.length - 1].url);\r\n         }\r\n         dd('VKWebAppCallAPIMethodResult', e.detail.data);\r\n\r\n        break;\r\n      case 'VKWebAppCallAPIMethodFailed':\r\n          console.log('VKWebAppCallAPIMethodFailed', e.detail.data);\r\n        break;\r\n      default:\r\n        // code\r\n    }\r\n  }\r\n\r\n  uploadPhoto = async (upload_url) => {\r\n    const requestUrl = `https://vargasoff.ru/meet.php`;\r\n    const file = document.getElementById('file').files[0];\r\n//    this.setState({ loading: true })\r\n    if(!file) {\r\n      this.setState({ error: true })\r\n      this.setState({ message: 'Файл не был выбран' })\r\n      connect.unsubscribe(this.sub);\r\n      return\r\n    }\r\n    if(!(file.type === 'image/png' || file.type === 'image/jpg' || file.type === 'image/jpeg')){\r\n      this.setState({ error: true })\r\n      this.setState({ message: 'Формат выбранного файла не поддерживается.' })\r\n      connect.unsubscribe(this.sub);\r\n      return\r\n    }\r\n    console.log(file.size)\r\n    if(file.size > 1190000){\r\n      this.setState({ error: true })\r\n      this.setState({ message: 'Размер выбранного файла слишком большой.' })\r\n      connect.unsubscribe(this.sub);\r\n      return\r\n    }\r\n\r\n    dd('file', file)\r\n    const body = new FormData();\r\n    body.append('file', file);\r\n    body.append('url', upload_url);\r\n    this.setState({ disabled: true });\r\n    fetch(requestUrl, { method: 'POST', body }).then(res => res.json()).then(res => {\r\n\r\n     connect.send(\"VKWebAppCallAPIMethod\", { \"method\": \"photos.save\", \"request_id\": \"photo_save_req\",\r\n      \"params\":\r\n      {\r\n        \"album_id\": \"267690301\",\r\n        \"group_id\": \"189366357\",\r\n        \"server\": res.info.server,\r\n        \"photos_list\": res.info.photos_list,\r\n        \"hash\": res.info.hash,\r\n        \"access_token\": this.state.token,\r\n        \"v\":\"5.103\"\r\n      }\r\n    });\r\n\r\n   });\r\n  }\r\n    render() {\r\n        const onChange = this.onChange;\r\n        const { id, state, openErrorSnackbar } = this.props;\r\n        const { name, start, snackbar, start_date, finish_date,\r\n          finish, description, symbols_name, symbols_description, photo, accept } = state;\r\n        const formLang = getMessage('forms');\r\n\r\n        const backgroundImage = `url(${photo || 'https://sun9-17.userapi.com/c856016/v856016841/191507/A_xwv3xLXfg.jpg'})`;\r\n    //    const cropper = React.createRef(null);\r\n\r\n      /*  function dataURLtoFile(dataurl, filename) {\r\n\r\n          var arr = dataurl.split(','),\r\n              mime = arr[0].match(/:(.*?);/)[1],\r\n              bstr = atob(arr[1]),\r\n              n = bstr.length,\r\n              u8arr = new Uint8Array(n);\r\n\r\n          while(n--){\r\n              u8arr[n] = bstr.charCodeAt(n);\r\n          }\r\n\r\n          return new File([u8arr], filename, {type:mime});\r\n      }\r\n\r\n      //Usage example:\r\n      var file = dataURLtoFile('data:text/plain;base64,aGVsbG8gd29ybGQ=','hello.txt');\r\n      console.log(file);*/\r\n\r\n        return (\r\n            <Panel id={id}>\r\n          {/*  <Cropper\r\n                ref={cropper}\r\n                src='https://sun9-17.userapi.com/c856016/v856016841/191507/A_xwv3xLXfg.jpg'\r\n                style={{height: 400, width: '100%'}}\r\n                aspectRatio={16 / 9}\r\n                guides={true}\r\n                crop={(e)=>console.log(e.target.cropper.getCroppedCanvas().toDataURL())}\r\n              />\r\n              */}\r\n                <PanelHeader>{ getMessage('add_meet_page') }</PanelHeader>\r\n                <Group title='Предпросмотр'/>\r\n                <Div onClick={() => connect.send(\"VKWebAppShowImages\", { images: [ photo ] })} className=\"MeetImg\" style={{ backgroundImage }} >\r\n                    <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ name || 'Сырки дорогие!' }</Div>\r\n                    <Div style={{ marginTop: '20%' }} className=\"MeetName\">{ start_date }</Div>\r\n                </Div>\r\n               <Group>\r\n\r\n                 <Separator style={{ margin: '12px 0' }} />\r\n\r\n                     <UsersStack  photos={[ state.fetchedUser.photo_100 ]}>{state.fetchedUser.first_name} {state.fetchedUser.last_name} • участников нет</UsersStack>\r\n\r\n\r\n                 <Separator style={{ margin: '12px 0' }} />\r\n                 <Div id='desk'>{state.description || 'Требуем понизить цену на сырки'}</Div>\r\n\r\n\r\n               </Group>\r\n                   <FormLayout>\r\n                       <Input\r\n                           type=\"text\"\r\n                           top={ `Название ${symbols_name}` }\r\n                           name=\"name\"\r\n                           maxLength='60'\r\n                           value={ name }\r\n                           placeholder={'Сырки дорогие!'}\r\n                           onChange={ onChange }\r\n                       />\r\n                       <Textarea\r\n                           top={  `Описание ${symbols_description }` }\r\n                           maxLength='254'\r\n                           name=\"description\"\r\n                           placeholder=\"Требуем понизить цену на сырки\"\r\n                           value={ description }\r\n                           onChange={ onChange }\r\n                       />\r\n                       <Input\r\n                           type=\"date\"\r\n                           top={ formLang.start }\r\n                           name=\"start_date\"\r\n                           value={ start }\r\n                           onChange={ onChange }\r\n                       />\r\n                    {/*   <Input\r\n                           type=\"time\"\r\n                           name=\"start_time\"\r\n                           onChange={ onChange }\r\n                       />*/}\r\n                       <Input\r\n                           type=\"date\"\r\n                           top={ formLang.finish }\r\n                           name=\"finish_date\"\r\n                           value={ finish }\r\n                           onChange={ onChange }\r\n                       />\r\n                    {/* <Input\r\n                           type=\"time\"\r\n                           name=\"finish_time\"\r\n                           onChange={ onChange }\r\n                       />*/}\r\n                       <File\r\n                           id='file'\r\n                           maxfiles={1}\r\n                           acceptfiletypes={['image/png', 'image/jpg', 'image/jpeg', '.png']}\r\n                           minfilesize={0}\r\n                           top={ formLang.photo }\r\n                           type=\"file\"\r\n                           name=\"file\"\r\n                           onChange={ onChange }\r\n                       />\r\n                      { this.state.error &&  <Div>{this.state.message}</Div>}\r\n                      { photo &&  <UsersStack onClick={() => connect.send(\"VKWebAppShowImages\", { images: [ photo ] })} photos={[ photo ]}>Обложка загружена</UsersStack>}\r\n                       <Checkbox checked={state.accept} onChange={ (e) => this.props.setParentState({ accept: e.currentTarget.checked }) }>Согласен с\r\n                       <Link target=\"_blank\" href=\"https://vk.com/@virtualmeetingsclub-pravila-razmescheniya\"> правилами</Link></Checkbox>\r\n                       <Checkbox checked={state.noty} onChange={ (e) => {\r\n                         if(e.currentTarget.checked){\r\n                            console.log('отправили!')\r\n                            connect.send(\"VKWebAppAllowMessagesFromGroup\", { \"group_id\": 189366357 });\r\n                         }\r\n                       }}>\r\n                       Уведомить о результате модерации\r\n                      </Checkbox>\r\n                       <Button size=\"xl\" disabled={this.state.disabled} onClick={ () => {\r\n                         const name = state.name.replace(/\\s/g, '');\r\n                         const description = state.description.replace(/\\s/g, '');\r\n\r\n                         if(name === undefined || name.length < 5){\r\n                            openErrorSnackbar('Название петиции указано неверно.');\r\n                           return\r\n                         }\r\n                         if(description === undefined || description < 5){\r\n                            openErrorSnackbar('Описание петиции указано неверно.');\r\n                           return\r\n                         }\r\n                         if(!start_date){\r\n                            openErrorSnackbar('Дата начала не указана.');\r\n                           return\r\n                         }\r\n                         if(!finish_date){\r\n                            openErrorSnackbar('Дата окончания не указана.');\r\n                           return\r\n                         }\r\n                         if(Date.parse(start_date) > Date.parse(finish_date)){\r\n                            openErrorSnackbar('Дата окончания петиции раньше даты начала.');\r\n                           return\r\n                         }\r\n                         if((Date.parse(start_date) < Date.parse(new Date())) && (  new Date(start_date).getDay() < new Date().getDay()  )){\r\n                            openErrorSnackbar('Дата начала петиции уже прошла.');\r\n                           return\r\n                         }\r\n                         if(!accept){\r\n                            openErrorSnackbar('Вы не согласились с правилами.');\r\n                           return\r\n                         }\r\n                         if(!photo){\r\n                            openErrorSnackbar('Обложка петиции обязательна.');\r\n                           return\r\n                         }\r\n\r\n                         this.AddMeet();\r\n                         connect.unsubscribe(this.sub);\r\n                       } }>\r\n                           { this.state.disabled ? <Spinner /> : formLang.add }\r\n                       </Button>\r\n                   </FormLayout>\r\n                   {snackbar}\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AddMeetPage;\r\n","import React from 'react';\r\n\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\r\nimport Footer from '@vkontakte/vkui/dist/components/Footer/Footer';\r\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\r\nimport Spinner from '@vkontakte/vkui/dist/components/Spinner/Spinner';\r\nimport { getMessage } from '../js/helpers';\r\n\r\nexport class Offline extends React.Component {\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Panel id=\"offline\" theme=\"white\">\r\n              <PanelHeader>{/*Проблемы*/}</PanelHeader>\r\n                <Div>\r\n                    <Footer style={{ marginTop: '50%' }} >{ getMessage('no_internet') }</Footer>\r\n                    <Spinner/>\r\n                </Div>\r\n            </Panel>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Offline;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, Button, FixedLayout, Div } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n//import img from '../img/list.png'\r\nclass Rules extends Component {\r\n\r\n\r\n    render() {\r\n        const { id, onStoryChange } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader>Диванные петиции</PanelHeader>\r\n              {/*  <img alt='' style={{ textAlign: 'center' }} width=\"75%\" height=\"100%\" src={img}/>*/}\r\n              <Div className='title' style={{ textAlign: 'center', marginTop: '40%' }}>Диванные петиции</Div>\r\n                <Div style={{ textAlign: 'justify' }} className='subtitle'> Диванные петиции — новый способ выразить свое мнение не выходя из дома.\r\nПриложение и контент в нем не преследует цели кого-либо оскорбить, является исключительно юмористическим, носит развлекательный контент и тщательно модерируется.</Div>\r\n                <FixedLayout vertical='bottom'>\r\n                <Div>\r\n                <Button size='xl' onClick={() => onStoryChange('onboarding', 'onboarding2')} level=\"primary\">Далее</Button>\r\n                </Div>\r\n                </FixedLayout>\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Rules;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, Button, FixedLayout, Div } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n//import img from '../img/list.png'\r\nclass Rules extends Component {\r\n\r\n\r\n    render() {\r\n        const { id, onStoryChange } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader>Диванные петиции</PanelHeader>\r\n                {/*  <img alt='' style={{ textAlign: 'center' }} width=\"75%\" height=\"100%\" src={img}/>*/}\r\n                <Div className='title' style={{ textAlign: 'center', marginTop: '40%' }}>Навигация</Div>\r\n                <Div style={{ textAlign: 'justify' }} className='subtitle'>\r\n                На первой вкладке находится список петиций, на второй — раздел для организации собственной, и на третьей — те, в которых вы принимаете участие. </Div>\r\n                <FixedLayout vertical='bottom'>\r\n                <Div>\r\n                <Button size='xl' onClick={() => onStoryChange('onboarding', 'onboarding3')} level=\"primary\">Далее</Button>\r\n                </Div>\r\n                </FixedLayout>\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Rules;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, Button, FixedLayout, Div } from '@vkontakte/vkui';\r\n\r\nimport connect from '@vkontakte/vk-connect';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\nclass Rules extends Component {\r\n\r\n\r\n    render() {\r\n        const { id, onStoryChange } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader>Диванные петиции</PanelHeader>\r\n                <Div className='title' style={{ textAlign: 'center', marginTop: '40%' }}>Уведомления</Div>\r\n                <Div style={{ textAlign: 'justify' }} className='subtitle'>\r\n                Если вы хотите получать важные уведомления, то разрешите их в следующем окне. </Div>\r\n                <Div style={{ textAlign: 'center' }} className='subtitle'>\r\n                Обещаем не тревожить по пустякам!</Div>\r\n                <FixedLayout vertical='bottom'>\r\n                <Div>\r\n                <Button size='xl' onClick={() => {\r\n                onStoryChange('home', 'meets')\r\n                connect.send(\"VKWebAppAllowMessagesFromGroup\", { \"group_id\": 189366357 });\r\n              }} level=\"primary\">Начать</Button>\r\n                </Div>\r\n                </FixedLayout>\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Rules;\r\n","import React, {Component} from 'react';\r\nimport { Panel, PanelHeader, IS_PLATFORM_IOS, Div, HeaderButton } from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './Home.css';\r\n\r\nclass Rules extends Component {\r\n\r\n\r\n    render() {\r\n        const { id, onStoryChange } = this.props;\r\n\r\n        return (\r\n            <Panel id={id}>\r\n                <PanelHeader left={\r\n                  <HeaderButton onClick={ () => onStoryChange('home', 'addMeetPage') }>\r\n\t\t\t               {IS_PLATFORM_IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t               </HeaderButton>}>\r\n                   Соглашение</PanelHeader>\r\n\r\n                <Div>*соглашение*</Div>\r\n            </Panel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Rules;\r\n","import React from 'react';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport { View, Epic, Tabbar, ConfigProvider, Snackbar, Avatar, TabbarItem, ScreenSpinner } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './css/App.css';\r\n\r\nimport API from './js/api';\r\nimport { checkVersionAndroid, showAlert } from './js/helpers';\r\n\r\nimport Icon24List from '@vkontakte/icons/dist/24/list';\r\nimport Icon24FavoriteOutline from '@vkontakte/icons/dist/24/favorite_outline';\r\nimport Icon24Privacy from '@vkontakte/icons/dist/24/privacy';\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\r\nimport Icon16Clear from '@vkontakte/icons/dist/16/clear';\r\n\r\nimport Home from './panels/Home';\r\nimport Favorite from './panels/Favorite';\r\nimport Meet from './panels/Meet';\r\nimport MeetAdmin from './panels/MeetAdmin';\r\nimport AdminPage from './panels/AdminPage';\r\nimport AddMeetPage from './panels/AddMeetPage';\r\nimport Offline from './panels/Offline';\r\nimport Onboarding from './panels/Onboarding';\r\nimport Onboarding2 from './panels/Onboarding2';\r\nimport Onboarding3 from './panels/Onboarding3';\r\nimport Rules from './panels/Rules';\r\n\r\nclass App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tactiveStory: 'home',\r\n\t\t\tactivePanel: 'meets',\r\n\t\t\tactiveTab: 'all',\r\n\t\t\tsnackbar: null,\r\n\t\t\tfetchedUser: {\r\n\t\t\t\tid: null\r\n\t\t\t},\r\n\t\t\tcache: null,\r\n\t\t\tpopout: <ScreenSpinner />,\r\n\t\t\toffline: false,\r\n\t\t\tmeets: false,\r\n\t\t\tsymbols_name: '',\r\n\t\t\tsymbols_description: '',\r\n\t\t\taccept: false,\r\n\t\t\tname: '',\r\n\t\t\tstart_date: false, //0000-00-00\r\n\t\t\tfinish_date: false, // 0000-00-00\r\n\t\t\tstart_time: '00:00:00',\r\n\t\t\tfinish_time: '00:00:00',\r\n\t\t\tdescription: '',\r\n\t\t\tphoto: false,\r\n\t\t\tmeet: false,\r\n\t\t\tnoty: false,\r\n\t\t\tcomments: false,\r\n\t\t\tcurrentMeetId: false,\r\n\t\t\tuserMeets: false,\r\n\t\t\tallMeets: false\r\n\t\t};\r\n\r\n\t\tthis.initApp();\r\n\r\n\t\tthis.onStoryChange \t= this.onStoryChange.bind(this);\r\n\t}\r\n\r\n\t\tinitApp = () => {\r\n\t\tif (window.location.hash === '#dark') {\r\n\t\t\tlet schemeAttribute = document.createAttribute('scheme');\r\n\t\t\tschemeAttribute.value = 'client_dark';\r\n\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t}\r\n\r\n\t\twindow.showOfflinePage = (e) => {\r\n            this.setState({ offline: e });\r\n\t\t};\r\n\r\n\t\twindow.showAlert = (message, title, actions) => {\r\n            showAlert(this.setState.bind(this), message, title, actions);\r\n\t\t};\r\n\r\n\t\twindow.showLoader = (show) => {\r\n            this.setState({ popout: show ? <ScreenSpinner /> : null });\r\n\t\t};\r\n\r\n\t\tcheckVersionAndroid();\r\n\r\n\t\tthis.api = new API();\r\n\t\tthis.checkRoute();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconnect.subscribe(this.sub);\r\n\t\tconnect.send('VKWebAppGetUserInfo', {});\r\n\t\tconnect.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#0080b4\"});\r\n\t\tsetInterval(() => this.checkOnline(), 3000);\r\n\t\tthis.getMeets();\r\n\t}\r\n\t sub = e => {\r\n\t\tswitch (e.detail.type) {\r\n\t\t\tcase 'VKWebAppGetUserInfoResult':\r\n\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\r\n\t\t\t\tlet user = this.state.fetchedUser\r\n\t\t\t\tthis.addUser(user)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'VKWebAppAllowMessagesFromGroupResult':\r\n\t\t\t\t\tthis.setState({ noty: e.detail.data.result });\r\n\t\t\t\t\tconsole.log(this.state)\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'VKWebAppAccessTokenReceived':\r\n\t\t\t\tif(e.detail.data.scope === '') \tthis.openErrorSnackbar('Действие отменено пользователем.')\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'VKWebAppAccessTokenFailed':\r\n\t\t\t\tthis.openErrorSnackbar('Действие отменено пользователем.')\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\t// code\r\n\t\t}\r\n\t}\r\n\t// TODO: Нужен history для навигации назад с других экранов и системной кнопки назад на ведре\r\n\tonStoryChange = (story, panel) => { //  vkConnect.send('VKWebAppEnableSwipeBack');\r\n\t//\tconnect.unsubscribe(this.sub);\r\n\t\tlet userId = this.state.fetchedUser.id\r\n\t\tthis.setState({\r\n\t\t\tactiveStory: story,\r\n\t\t\tactivePanel: panel,\r\n\t\t\tcomments: false,\r\n\t\t\t// snackbar: null\r\n\t\t});\r\n\t\tif(story !== 'home') this.setState({ snackbar: null });\r\n\t\tif(story === 'home') this.getMeets(this.state.fetchedUser.id);\r\n\t\tif(story === 'favorites') {\r\n\t\t\tlet activeTab = this.state.activeTab\r\n\t\t\tif(activeTab === 'all'){\r\n\t\t\t\tthis.getUserMeets(userId);\r\n\t\t\t} else if(activeTab === 'my'){\r\n\t\t\t\tthis.getOwneredMeets(userId);\r\n\t\t\t} else if(activeTab === 'exp'){\r\n\t\t\t\tthis.getExpiredUserMeets(userId);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(story === 'admin') this.getAllMeets(this.state.fetchedUser.id);\r\n\t\tif(panel !== 'meet') connect.send('VKWebAppDisableSwipeBack');\r\n\t}\r\n\r\n\tcheckRoute = async e => {\r\n\t\tlet route = window.location.hash.replace('#', '');\r\n\t\tconsole.log(route);\r\n\t\tif (route > 0) {\r\n\t\t\t\tconst meet = await this.api.GetMeet(route);\r\n\t\t\t\tconsole.log(meet[0]);\r\n\t\t\t\tif(meet[0]) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tmeet: meet[0],\r\n\t\t\t\t\t\tactivePanel: 'meet'\r\n\t\t\t\t\t });\r\n\t\t\t\t} else return\r\n\t\t} else return\r\n\t}\r\n\tcheckOnline = e => {\r\n\t\tif(window.navigator.onLine){\r\n\t\t\twindow.showOfflinePage(false);\r\n\t\t} else window.showOfflinePage(true);\r\n\t}\r\n\tmakeStory = async (id) => {\r\n\t\tconsole.log('makeStory')\r\n\t\tlet story = await this.api.getStory(id);\r\n\t\tstory = 'data:image/png;base64,' + story.image.replace(`b'`,'').replace(`'`, '');\r\n\t\tconsole.log(story);\r\n\t\tlet url = `https://vk.com/app7217332#${this.state.currentMeetId}`\r\n\t\tawait connect.send(\"VKWebAppShowStoryBox\", { \"background_type\" : \"image\", \"locked\": true, \"blob\": story, \"attachment\": {\r\n\t\t\t\"text\": \"go_to\",\r\n\t\t\t\"type\": \"url\",\r\n\t\t\t\"url\": url\r\n\t\t} });\r\n\t}\r\n\r\n\topenDoneSnackbar = e => {\r\n\t\tthis.setState({\r\n\t\t\tsnackbar: <Snackbar\r\n\t\t\t\t\t\t\t\t\t\tduration={2000}\r\n\t\t\t\t\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\tbefore={<Avatar size={24} style={{ backgroundColor: '#4bb34b' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{e}\r\n\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t});\r\n\t}\r\n\topenErrorSnackbar = e => {\r\n\t\tthis.setState({\r\n\t\t\tsnackbar: <Snackbar\r\n\t\t\t\t\t\t\t\t\t\tduration={2000}\r\n\t\t\t\t\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\t\t\t\tbefore={<Avatar size={24} style={{backgroundColor: '#FF0000'}}><Icon16Clear fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{e}\r\n\t\t\t\t\t\t\t\t</Snackbar>\r\n\t\t});\r\n\t}\r\n\r\n\tgetMeets = async () => { // доступные митинги\r\n\t\t\twindow.showLoader(true);\r\n\t\t\tthis.setState({ meets: false });\r\n\t\t\tconst meets = await this.api.GetMeets();\r\n\t\t\tthis.setState({ meets });\r\n\t\t\twindow.showLoader(false);\r\n\t}\r\n\tgetExpiredUserMeets = async () => {\r\n\t\t\tthis.setState({ userMeets: false });\r\n\t\t\twindow.showLoader(true);\r\n\t\t\tconst userMeets = await this.api.GetExpiredUserMeets(this.state.fetchedUser.id);\r\n\t\t\tthis.setState({ userMeets });\r\n\t\t\twindow.showLoader(false);\r\n\t}\r\n\tgetOwneredMeets = async () => {\r\n\t\t\tthis.setState({ userMeets: false });\r\n\t\t\twindow.showLoader(true);\r\n\t\t\tconst userMeets = await this.api.GetOwneredMeets(this.state.fetchedUser.id);\r\n\t\t\tthis.setState({ userMeets });\r\n\t\t\twindow.showLoader(false);\r\n\t}\r\n\tgetUserMeets = async () => { // митинги, в которых учавствует юзер\r\n\t\t\tthis.setState({ userMeets: false });\r\n\t\t\twindow.showLoader(true);\r\n\t\t\tconst userMeets = await this.api.GetUserMeets(this.state.fetchedUser.id);\r\n\t\t\tthis.setState({ userMeets });\r\n\t\t\twindow.showLoader(false);\r\n\t}\r\n\tgetAllMeets = async () => { // админка\r\n\t\t\twindow.showLoader(true);\r\n\t\t\tconst allMeets = await this.api.GetAllMeets(this.state.fetchedUser.id);\r\n\r\n\t\t\tthis.setState({ allMeets });\r\n\t\t\twindow.showLoader(false);\r\n\t}\r\n\tgetComments = async (meet) => {\r\n\t\t\tconst comments = await this.api.GetComments();\r\n\t\t\tthis.setState({ comments });\r\n\t}\r\n\taddUser = async (user) => { // добавить данные юзера в базу\r\n\t\t\tconst isFirst = await this.api.IsFirst(user.id);\r\n\t\t\tif(isFirst){ // показываем онбординг, если юзер зашёл первый раз\r\n\t\t\t\tthis.api.AddUser(user);\r\n\t\t\t\tthis.onStoryChange('onboarding', 'onboarding');\r\n\t\t\t} else this.api.UpdateUser(user); // обновить данные юзера в базе\r\n\t}\r\n\trender() {\r\n\t\tconst { api, state, onStoryChange, getMeets, makeStory, getComments,\r\n\t\t\tgetUserMeets, openErrorSnackbar, openDoneSnackbar, getOwneredMeets, getExpiredUserMeets } = this;\r\n\r\n\t\tconst { offline, popout, activeStory, meets, userMeets, allMeets,\r\n\t\t\t activePanel, fetchedUser, comments } = this.state;\r\n\r\n\t\tconst isUserAdmin = (\r\n\t\t\tthis.state.fetchedUser.id === 35501089  ||\r\n\t\t\tthis.state.fetchedUser.id === 236820864 ||\r\n\t\t\tthis.state.fetchedUser.id === 87478742\r\n\t\t );\r\n\r\n\t\tconst props = { getOwneredMeets, getExpiredUserMeets, openDoneSnackbar,\r\n\t\t\t openErrorSnackbar,\tapi, isUserAdmin, getUserMeets, state, activeStory,\r\n\t\t\t makeStory, getComments, getMeets, meets, userMeets,\r\n\t\t\tallMeets, onStoryChange, fetchedUser,\r\n\t\t\tcomments, setParentState: this.setState.bind(this) };\r\n\r\n\t\tconst history = activePanel === 'meet' ? ['meets', 'meet'] : ['meets'];\r\n\r\n\t\tconst onSwipeBack = e => {\r\n\t\t\tthis.setState({ activePanel: 'meets' });\r\n\t\t}\r\n\r\n\t\tconst views = { onSwipeBack, history, popout, activePanel };\r\n\r\n\t\treturn (\r\n\t\t\t <ConfigProvider>\r\n\t\t\t\t{\r\n\t\t\t\t\toffline ?\r\n\t\t\t\t\t\t<View id=\"offline\"  popout={ popout } activePanel=\"offline\">\r\n\t\t\t\t\t\t\t<Offline id=\"offline\" { ...props } />\r\n\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Epic activeStory={ activeStory } tabbar={\r\n\t\t\t\t\t\t\t(activeStory !== 'onboarding' && activePanel !== 'meet') && <Tabbar>\r\n\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\tonClick={ () => this.onStoryChange('home', 'meets') }\r\n\t\t\t\t\t\t\t\tselected={ activeStory === 'home' }\r\n\t\t\t\t\t\t\t><Icon24List /></TabbarItem>\r\n\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\tonClick={ () => this.onStoryChange('addMeet', 'addMeetPage') }\r\n\t\t\t\t\t\t\t\tselected={ activeStory === 'addMeet' }\r\n\t\t\t\t\t\t\t><Icon24Add /></TabbarItem>\r\n\t\t\t\t\t\t\t{ isUserAdmin && <TabbarItem\r\n\t\t\t\t\t\t\t\t\tonClick={ () => this.onStoryChange('admin', 'meets') }\r\n\t\t\t\t\t\t\t\t\tselected={ activeStory === 'admin' }\r\n\t\t\t\t\t\t\t\t><Icon24Privacy /></TabbarItem>}\r\n\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\tonClick={ () => this.onStoryChange('favorites', 'meets') }\r\n\t\t\t\t\t\t\t\t\tselected={ activeStory === 'favorites' }\r\n\t\t\t\t\t\t\t\t><Icon24FavoriteOutline /></TabbarItem>\r\n\t\t\t\t\t\t\t</Tabbar>\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t\t<View id=\"home\"\t{ ...views } >\r\n\t\t\t\t\t\t\t\t<Home id=\"meets\" { ...props } />\r\n\t\t\t\t\t\t\t\t<Rules id=\"rules\" { ...props } />\r\n\t\t\t\t\t\t\t\t<Meet id=\"meet\" { ...props } />\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t<View id=\"addMeet\" { ...views } >\r\n\t\t\t\t\t\t\t\t<AddMeetPage id=\"addMeetPage\" { ...props } />\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t<View id=\"admin\" { ...views } >\r\n\t\t\t\t\t\t\t\t<AdminPage id=\"meets\" { ...props } />\r\n\t\t\t\t\t\t\t\t<MeetAdmin id='meetAdmin' { ...props } />\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t<View\tid=\"favorites\" { ...views } >\r\n\t\t\t\t\t\t\t\t<Favorite id=\"meets\" { ...props } />\r\n\t\t\t\t\t\t\t\t<Meet id=\"meet\" { ...props }/>\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t<View id=\"onboarding\" { ...views } >\r\n\t\t\t\t\t\t\t\t<Onboarding id=\"onboarding\" { ...props }/>\r\n\t\t\t\t\t\t\t\t<Onboarding2 id=\"onboarding2\" { ...props }/>\r\n\t\t\t\t\t\t\t\t<Onboarding3 id=\"onboarding3\" { ...props }/>\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t</Epic>\r\n\t\t\t\t}\r\n\t\t\t </ConfigProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport connect from '@vkontakte/vk-connect';\r\nimport App from './App';\r\nimport mVKMiniAppsScrollHelper from '@vkontakte/mvk-mini-apps-scroll-helper';\r\n// import registerServiceWorker from './sw';\r\n\r\nconst root = document.getElementById('root');\r\n\r\n// Init VK  Mini App\r\nconnect.send('VKWebAppInit', {});\r\n\r\nmVKMiniAppsScrollHelper(root);\r\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\r\n// расскомментируйте строку с registerServiceWorker();\r\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\r\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\r\n// registerServiceWorker();\r\n\r\nReactDOM.render(<App />, root);\r\n"],"sourceRoot":""}